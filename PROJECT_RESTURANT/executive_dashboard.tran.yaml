type: "transformation"
version: "1.0"
pipeline:
  components:
    CLV_TABLE:
      type: "table-input"
      parameters:
        componentName: "Customer Lifetime Value Data"
        database: "[Environment Default]"
        schema: "[Environment Default]"
        targetTable: "CLV"
        columnNames:
        - "customer_id"
        - "customer_name"
        - "total_spent"
    AOV_TABLE:
      type: "table-input"
      parameters:
        componentName: "Average Order Value Data"
        database: "[Environment Default]"
        schema: "[Environment Default]"
        targetTable: "AOV"
        columnNames:
        - "avg_order_value"
    TOP_SELLING_TABLE:
      type: "table-input"
      parameters:
        componentName: "Top Selling Items Data"
        database: "[Environment Default]"
        schema: "[Environment Default]"
        targetTable: "TOP_SELLING"
        columnNames:
        - "item_name"
        - "category"
        - "total_quantity_sold"
        - "total_revenue"
    Executive KPI Summary:
      type: "calculator"
      sources:
      - "AOV_TABLE"
      parameters:
        componentName: "Executive KPI Summary"
        includeInputColumns: "Yes"
        calculations:
        - - "'Restaurant Performance Dashboard'"
          - "dashboard_title"
        - - "CURRENT_DATE()"
          - "report_date"
    Category Performance Summary:
      type: "aggregate"
      sources:
      - "TOP_SELLING_TABLE"
      parameters:
        componentName: "Category Performance Summary"
        groupings:
        - "category"
        aggregations:
        - - "total_revenue"
          - "Sum"
        - - "total_quantity_sold"
          - "Sum"
        - - "item_name"
          - "Count"
        groupingType: "Group By"
    Category Dashboard Output:
      type: "rewrite-table"
      sources:
      - "Category Performance Summary"
      parameters:
        componentName: "Category Dashboard Output"
        warehouse: "[Environment Default]"
        database: "[Environment Default]"
        schema: "[Environment Default]"
        targetTable: "EXEC_CATEGORY_DASHBOARD"
        orderBy:
        - - "sum_total_revenue"
          - "DESCENDING"
      postProcessing:
        updateOutputMessage:
        updateScalarVariables:
    Executive Summary Output:
      type: "rewrite-table"
      sources:
      - "Executive KPI Summary"
      parameters:
        componentName: "Executive Summary Output"
        warehouse: "[Environment Default]"
        database: "[Environment Default]"
        schema: "[Environment Default]"
        targetTable: "EXEC_SUMMARY"
        orderBy:
      postProcessing:
        updateOutputMessage:
        updateScalarVariables:
design:
  components:
    CLV_TABLE:
      position:
        x: 0
        "y": 0
      tempMetlId: 1
    AOV_TABLE:
      position:
        x: 0
        "y": 100
      tempMetlId: 2
    TOP_SELLING_TABLE:
      position:
        x: 0
        "y": 200
      tempMetlId: 3
    Executive KPI Summary:
      position:
        x: 300
        "y": 100
      tempMetlId: 4
    Category Performance Summary:
      position:
        x: 300
        "y": 200
      tempMetlId: 5
    Category Dashboard Output:
      position:
        x: 600
        "y": 200
      tempMetlId: 6
    Executive Summary Output:
      position:
        x: 600
        "y": 100
      tempMetlId: 7
  notes:
    "1":
      position:
        x: 61
        "y": -133
      size:
        height: 205
        width: 250
      theme: "light-blue"
      content: |
        ### **üìä Data Sources**
        
        **Analytics Tables:**
        - üí∞ CLV Analysis
        - üí≥ AOV Metrics
        - üçΩÔ∏è Menu Performance
    "2":
      position:
        x: 332
        "y": -162
      size:
        height: 235
        width: 300
      theme: "light-green"
      content: |
        ### **üîß Executive Processing**
        
        **Dashboard Analytics:**
        - KPI Summary Generation
        - Category Performance Ranking
        - Executive Report Creation
    "3":
      position:
        x: 661
        "y": -80
      size:
        height: 235
        width: 250
      theme: "green"
      content: |
        ### **üìã Executive Outputs**
        
        **C-Suite Dashboards:**
        - Executive Summary
        - Category Performance
        - Strategic Insights
