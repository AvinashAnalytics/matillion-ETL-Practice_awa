type: "transformation"
version: "1.0"
pipeline:
  components:
    Customer Lifetime Value Data:
      type: "table-input"
      parameters:
        componentName: "Customer Lifetime Value Data"
        database: "[Environment Default]"
        schema: "[Environment Default]"
        targetTable: "CLV"
        columnNames:
        - "customer_id"
        - "customer_name"
        - "total_spent"
    Average Order Value Data:
      type: "table-input"
      parameters:
        componentName: "Average Order Value Data"
        database: "[Environment Default]"
        schema: "[Environment Default]"
        targetTable: "AOV"
        columnNames:
        - "avg_order_value"
    Top Selling Items Data:
      type: "table-input"
      parameters:
        componentName: "Top Selling Items Data"
        database: "[Environment Default]"
        schema: "[Environment Default]"
        targetTable: "TOP_SELLING"
        columnNames:
        - "item_name"
        - "category"
        - "total_quantity_sold"
        - "total_revenue"
    Executive KPI Summary:
      type: "calculator"
      sources:
      - "Average Order Value Data"
      parameters:
        componentName: "Executive KPI Summary"
        includeInputColumns: "Yes"
        calculations:
        - - "'Restaurant Performance Dashboard'"
          - "dashboard_title"
        - - "CURRENT_DATE()"
          - "report_date"
    Customer Lifetime Value Summary:
      type: "aggregate"
      sources:
      - "Customer Lifetime Value Data"
      parameters:
        componentName: "Customer Lifetime Value Summary"
        groupings:
        aggregations:
        - - "total_spent"
          - "Sum"
        - - "customer_id"
          - "Count"
        - - "total_spent"
          - "Average"
        - - "total_spent"
          - "Max"
        groupingType: "Group By"
    Category Performance Summary:
      type: "aggregate"
      sources:
      - "Top Selling Items Data"
      parameters:
        componentName: "Category Performance Summary"
        groupings:
        - "category"
        aggregations:
        - - "total_revenue"
          - "Sum"
        - - "total_quantity_sold"
          - "Sum"
        - - "item_name"
          - "Count"
        groupingType: "Group By"
    Category Dashboard Output:
      type: "rewrite-table"
      sources:
      - "Category Performance Summary"
      parameters:
        componentName: "Category Dashboard Output"
        warehouse: "[Environment Default]"
        database: "[Environment Default]"
        schema: "[Environment Default]"
        targetTable: "EXEC_CATEGORY_DASHBOARD"
        orderBy:
        - - "sum_total_revenue"
          - "DESCENDING"
      postProcessing:
        updateOutputMessage: "üìà Category performance dashboard ready - Strategic insights available"
        updateScalarVariables:
    Executive Summary Output:
      type: "rewrite-table"
      sources:
      - "Executive KPI Summary"
      parameters:
        componentName: "Executive Summary Output"
        warehouse: "[Environment Default]"
        database: "[Environment Default]"
        schema: "[Environment Default]"
        targetTable: "EXEC_SUMMARY"
        orderBy:
      postProcessing:
        updateOutputMessage: "üìä Executive summary dashboard ready - Real-time KPIs operational"
        updateScalarVariables:
    Customer Lifetime Value Data Output:
      type: "rewrite-table"
      sources:
      - "Customer Lifetime Value Summary"
      parameters:
        componentName: "Customer Lifetime Value Data Output"
        warehouse: "[Environment Default]"
        database: "[Environment Default]"
        schema: "[Environment Default]"
        targetTable: "EXEC_CLV_DATA"
        orderBy:
      postProcessing:
        updateOutputMessage: "üí∞ Customer Lifetime Value executive summary ready"
        updateScalarVariables:
design:
  components:
    Customer Lifetime Value Data:
      position:
        x: 0
        "y": 0
      tempMetlId: 1
    Average Order Value Data:
      position:
        x: 0
        "y": 100
      tempMetlId: 2
    Top Selling Items Data:
      position:
        x: 0
        "y": 200
      tempMetlId: 3
    Executive KPI Summary:
      position:
        x: 300
        "y": 100
      tempMetlId: 4
    Category Performance Summary:
      position:
        x: 300
        "y": 200
      tempMetlId: 5
    Category Dashboard Output:
      position:
        x: 600
        "y": 200
      tempMetlId: 6
    Executive Summary Output:
      position:
        x: 600
        "y": 100
      tempMetlId: 7
    Customer Lifetime Value Summary:
      position:
        x: 300
        "y": 0
      tempMetlId: 8
    Customer Lifetime Value Data Output:
      position:
        x: 600
        "y": 0
      tempMetlId: 9
  notes:
    "1":
      position:
        x: -70
        "y": -220
      size:
        height: 535
        width: 250
      theme: "light-blue"
      content: |
        ### **üìä Data Sources**

        **Analytics Tables:**
        - üí∞ CLV Analysis (645 customers)
        - üí≥ AOV Metrics ($83.68 avg)
        - üçΩÔ∏è Menu Performance (624 items)
    "2":
      position:
        x: 240
        "y": -220
      size:
        height: 525
        width: 250
      theme: "light-green"
      content: |
        ### **üîß Executive Processing**

        **Dashboard Analytics:**
        - KPI Summary Generation
        - Category Performance Ranking
        - Customer Lifetime Value Analysis
        - Executive Report Creation
    "3":
      position:
        x: 540
        "y": -220
      size:
        height: 525
        width: 250
      theme: "green"
      content: |
        ### **üìã Executive Outputs**

        **C-Suite Dashboards:**
        - Executive Summary (Real-time KPIs)
        - Category Performance (3 categories)
        - Customer Lifetime Value Data
        - Strategic Insights ($130K opportunities)
